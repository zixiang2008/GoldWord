<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>GoldWord ä¸‹è½½ä¸­å¿ƒ</title>
  <script src="redirect-to-cdn.js"></script>
  <style>
    body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;margin:0;background:#fff;color:#333}
    .wrap{max-width:980px;margin:0 auto;padding:24px}
    h1{font-size:24px;margin:0 0 12px}
    .ver{font-size:14px;color:#666;margin-bottom:16px}
    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
    .card{border:1px solid #e5e5e5;border-radius:12px;padding:14px;background:#fafafa}
    .card h3{margin:0 0 8px;font-size:16px}
    .card a{display:inline-block;margin-top:8px;padding:8px 10px;border-radius:8px;background:#007aff;color:#fff;text-decoration:none}
    .note{margin-top:20px;font-size:13px;color:#555}
    @media(max-width:720px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media(max-width:460px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>GoldWord ä¸‹è½½ä¸­å¿ƒ</h1>
    <div class="ver" id="ver">å½“å‰ç‰ˆæœ¬ï¼š</div>
    <div class="grid" id="grid"></div>
    <div class="note">
      <div style="font-weight:600;margin-bottom:6px">ä½¿ç”¨æŒ‡å¼•</div>
      <div class="info-grid">
        <div class="info-card"><div class="info-icon i-mac">ï£¿</div><div><div style="font-weight:600;color:#007aff">macOS å®‰è£…åŒ….app</div><div style="color:#555">è§£å‹å¾—åˆ° <span style="font-family:monospace">GoldWord.app</span>ï¼Œæ‹–å…¥â€œåº”ç”¨ç¨‹åºâ€ã€‚å¦‚æç¤ºæœªçŸ¥å¼€å‘è€…ï¼šç³»ç»Ÿè®¾ç½®â†’éšç§ä¸å®‰å…¨â†’å…è®¸ã€‚</div></div></div>
        <div class="info-card"><div class="info-icon i-mac">ï£¿</div><div><div style="font-weight:600;color:#007aff">macOS å®‰è£…åŒ…ï¼ˆDMGï¼‰</div><div style="color:#555">æ‰“å¼€ DMGï¼Œå°†åº”ç”¨æ‹–å…¥â€œåº”ç”¨ç¨‹åºâ€ã€‚é¦–æ¬¡è¿è¡Œå‚è€ƒä¸Šæ–¹å…è®¸æ­¥éª¤ã€‚</div></div></div>
        <div class="info-card"><div class="info-icon i-android">ğŸ¤–</div><div><div style="font-weight:600;color:#22c55e">Android å¹³æ¿ç‰ˆ APK</div><div style="color:#555">åœ¨å¹³æ¿è®¾å¤‡å®‰è£… APKï¼Œè®¾ç½®â€œå…è®¸æœªçŸ¥æ¥æºâ€ã€‚é€‚é…å¤§å±æ¨ªå±ä½“éªŒã€‚</div></div></div>
        <div class="info-card"><div class="info-icon i-android">ğŸ“±</div><div><div style="font-weight:600;color:#22c55e">Android æ‰‹æœºç‰ˆ APK</div><div style="color:#555">æ‰‹æœºå®‰è£… APKï¼Œæˆäºˆè¯­éŸ³æƒé™ä»¥ä½¿ç”¨æœ—è¯»åŠŸèƒ½ã€‚</div></div></div>
        <div class="info-card"><div class="info-icon i-ipad">ğŸ§¿</div><div><div style="font-weight:600;color:#5856d6">iPad å®‰è£…åŒ…ï¼ˆIPAï¼‰</div><div style="color:#555">ä¼ä¸š/æµ‹è¯•åˆ†å‘ï¼šSafari å®‰è£…åï¼Œè®¾ç½®â†’é€šç”¨â†’è®¾å¤‡ç®¡ç†â†’ä¿¡ä»»è¯ä¹¦ã€‚</div></div></div>
        <div class="info-card"><div class="info-icon i-win">âŠ</div><div><div style="font-weight:600;color:#333">Windows å®‰è£…åŒ…</div><div style="color:#555">ä¸‹è½½ EXE æˆ– ZIPã€‚å¦‚è¢«æ‹¦æˆªé€‰æ‹©â€œä»è¦è¿è¡Œ/ä¿ç•™â€ã€‚ZIP è§£å‹ååŒå‡»è¿è¡Œã€‚</div></div></div>
        <div class="info-card"><div class="info-icon i-mac">ï£¿</div><div><div style="font-weight:600;color:#8e8e93">macOS å®‰è£…åŒ…ï¼ˆZIPï¼‰</div><div style="color:#555">è§£å‹å¾—åˆ°åº”ç”¨æˆ–å®¹å™¨ï¼Œæ‹–å…¥â€œåº”ç”¨ç¨‹åºâ€ã€‚é€‚åˆæ— æ³•æŒ‚è½½ DMG çš„ç¯å¢ƒã€‚</div></div></div>
      </div>
    </div>
  </div>
  <script>
  (async function(){
    const verEl=document.getElementById('ver');
    const grid=document.getElementById('grid');
    function fmtSize(bytes){ if(!bytes && bytes!==0) return ''; const u=['B','KB','MB','GB']; let i=0; let v=Number(bytes); while(v>=1024&&i<u.length-1){ v/=1024; i++; } return `${v.toFixed(i?2:0)} ${u[i]}`; }
    function fmtDate(s){ try{ const d=new Date(s); if(isNaN(d.getTime())) return ''; const y=d.getFullYear(); const m=String(d.getMonth()+1).padStart(2,'0'); const da=String(d.getDate()).padStart(2,'0'); const hh=String(d.getHours()).padStart(2,'0'); const mm=String(d.getMinutes()).padStart(2,'0'); return `${y}-${m}-${da} ${hh}:${mm}`; }catch(_){ return ''; } }
    function moreCard(){
      const c=document.createElement('div'); c.className='card';
      const h=document.createElement('h3'); h.textContent='å¿«é€Ÿåé¦ˆ'; c.appendChild(h);
      const p=document.createElement('div'); p.textContent='æäº¤é—®é¢˜ä¸å»ºè®®'; c.appendChild(p);
      const a=document.createElement('a'); a.href='https://github.com/zixiang2008/GoldWord/issues'; a.textContent='æ‰“å¼€ Issues'; a.target='_blank'; c.appendChild(a);
      grid.appendChild(c);
    }
    async function card(title, name, url, ver, size, mtime){
      const c=document.createElement('div');c.className='card';
      const h=document.createElement('h3');h.textContent=title; c.appendChild(h);
      if(name&&url){
        const p=document.createElement('div');
        let label=name;
        if (/\.app\.zip$/i.test(name)) { label = 'macOS å®‰è£…åŒ….app'; }
        p.textContent=label; c.appendChild(p);
        const meta=document.createElement('div'); meta.style.fontSize='12px'; meta.style.color='#666'; meta.textContent=`æ–‡ä»¶å¤§å°ï¼š${size!=null?fmtSize(size):'â€”'} ï½œ æ›´æ–°æ—¶é—´ï¼š${mtime?fmtDate(mtime):'â€”'}`; c.appendChild(meta);
        const a=document.createElement('a'); a.href=url; a.textContent='ä¸‹è½½'; c.appendChild(a);
        const gh=document.createElement('a'); gh.href=`https://github.com/zixiang2008/GoldWord/releases/download/v${ver}/${encodeURIComponent(name)}`; gh.textContent='ä» GitHub ä¸‹è½½'; gh.style.marginLeft='8px'; gh.target='_blank'; c.appendChild(gh);
      } else {
        const p=document.createElement('div'); p.textContent='æš‚æœªæä¾›è¯¥å¹³å°çš„ä¸‹è½½åŒ…'; c.appendChild(p);
      }
      grid.appendChild(c);
    }
    try{
      const latest = await fetch('downloads/latest.json').then(r=>r.json());
      const ver = latest.latest;
      const info = await fetch('downloads/'+ver+'/index.json').then(r=>r.json());
      verEl.textContent = `å½“å‰ç‰ˆæœ¬ï¼š${info.version}`;
      const items = Array.isArray(info.items) ? info.items : [];
      const get=(t)=> items.find(x=>x.type===t);
      const phone=get('android-phone');
      const pad=get('android-pad');
      const wins=items.filter(x=>x.type==='win');
      const winZip = wins.find(x=>/\.zip$/i.test(x.name)) || wins[0] || null;
      const macs=items.filter(x=>x.type==='mac');
      const macApp = macs.find(x=>/\.app\.zip$/i.test(x.name)) || null;
      const macDmg = macs.find(x=>/\.dmg$/i.test(x.name)) || null;
      const macZip = macs.find(x=>/\.zip$/i.test(x.name) && !/\.app\.zip$/i.test(x.name)) || null;
      const ipad=get('ipad');
      if (macApp) await card('macOS å®‰è£…åŒ….app', macApp.name, macApp.url, ver, macApp.size, macApp.mtime);
      if (macDmg) await card('macOS å®‰è£…åŒ…ï¼ˆDMGï¼‰', macDmg.name, macDmg.url, ver, macDmg.size, macDmg.mtime);
      await card('Android å¹³æ¿ç‰ˆ APK', pad?.name, pad?.url, ver, pad?.size, pad?.mtime);
      await card('iPad å®‰è£…åŒ…ï¼ˆIPAï¼‰', ipad?.name, ipad?.url, ver, ipad?.size, ipad?.mtime);
      await card('Windows å®‰è£…åŒ…', winZip?.name, winZip?.url, ver, winZip?.size, winZip?.mtime);
      await card('Android æ‰‹æœºç‰ˆ APK', phone?.name, phone?.url, ver, phone?.size, phone?.mtime);
      if (macZip) await card('macOS å®‰è£…åŒ…ï¼ˆZIPï¼‰', macZip.name, macZip.url, ver, macZip.size, macZip.mtime);
      moreCard();
    }catch(e){ verEl.textContent='åŠ è½½å¤±è´¥'; }
  })()
  </script>
</body>
</html>
