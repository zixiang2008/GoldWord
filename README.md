# GoldWord

[![PWA](https://img.shields.io/badge/PWA-ready-blue)](#)
[![Platforms](https://img.shields.io/badge/platforms-Web%20%7C%20Electron%20%7C%20Android%20%7C%20iOS-brightgreen)](#)
[![Deploy](https://img.shields.io/badge/deploy-Netlify%20%7C%20Cloudflare%20Pages%20%7C%20Firebase-00C7B7)](#)
[![State](https://img.shields.io/badge/state-offline%20first-success)](#)

æ¯ä¸€ä¸ªè®°ä½çš„å•è¯ï¼Œéƒ½æ˜¯ä¸€æšé‡‘å¸ã€‚

## ğŸª™ GoldWord â€” å“ç‰Œæ•…äº‹
åœ¨è¿™ä¸ªä¿¡æ¯çˆ†ç‚¸çš„æ—¶ä»£ï¼Œè¯­è¨€å°±æ˜¯è´§å¸ã€‚æ¯ä¸€ä¸ªä½ è®°ä½çš„å•è¯ï¼Œéƒ½æ˜¯ä½ è®¤çŸ¥ä¸–ç•Œçš„â€œé‡‘å¸â€ã€‚GoldWord çš„è¯ç”Ÿï¼Œå°±åƒä¸€åº§å±äºä½ çš„è¯­è¨€é‡‘åº“ï¼šå®ƒæŠŠå­¦ä¹ å˜æˆç§¯ç´¯ï¼ŒæŠŠè®°å¿†å˜æˆæŠ•èµ„ã€‚æ¯ä¸€æ¬¡ä½ å­¦ä¹ ã€æ‹¼å†™ã€å¤ä¹ ï¼Œéƒ½åƒåœ¨ä¸ºè‡ªå·±çš„æœªæ¥â€œé“¸é€ é‡‘å¸â€ã€‚

æˆ‘ä»¬ç›¸ä¿¡ï¼š
- ä¸€æšè¯æ±‡çš„ä»·å€¼ï¼Œèƒœè¿‡åƒè¨€ä¸‡è¯­ã€‚
- è®°å¿†ä¸æ˜¯æ­»è®°ï¼Œè€Œæ˜¯æµåŠ¨çš„è´¢å¯Œã€‚
- æŒæ¡è¯­è¨€ï¼Œå°±æŒæ¡é€šå¾€ä¸–ç•Œçš„é’¥åŒ™ã€‚

åœ¨ GoldWordï¼Œä½ ä¸ä¼šè¢«å¡«é¸­ï¼Œè€Œæ˜¯è¢«æ¿€åŠ±ã€‚æ¯ä¸€æšâ€œé‡‘è¯â€ä»£è¡¨ä¸€æ¬¡æˆé•¿ï¼Œæ¯ä¸€è½®å¾ªç¯è®©ä½ æ›´å¯Œæœ‰ã€‚å½“ä½ çš„è¯æ±‡åº“é—ªé—ªå‘å…‰æ—¶ï¼Œä½ å°±çœŸæ­£æ‹¥æœ‰äº†â€”â€”æœªæ¥ä¹‹é—¨çš„é‡‘é’¥åŒ™ã€‚

ä¸€ä¸ªè½»é‡çš„è‹±è¯­å•è¯å­¦ä¹ ä¸å¤ä¹ åº”ç”¨ï¼Œæ”¯æŒæœ¬åœ°å¯¼å…¥è¯åº“ã€è®°å¿†æ ‡è®°ã€è¿›åº¦ç»Ÿè®¡ã€ç¦»çº¿ä½¿ç”¨ï¼Œä»¥åŠå°è£…ä¸º Android APK åœ¨å¹³æ¿è®¾å¤‡ï¼ˆå¦‚ vivo Pad3 Proï¼ŒAndroid 15ï¼‰ä¸Šè¿è¡Œã€‚

## åŠŸèƒ½ç‰¹æ€§
- è¯åº“å¯¼å…¥ï¼šæ”¯æŒ `xlsx/xls/csv/docx/çº¯æ–‡æœ¬`ï¼Œå¯ä»æ—§ç‰ˆé¡µé¢å†…è”æ•°æ®è‡ªåŠ¨å¯¼å…¥ã€‚
- å­¦ä¹ ä¸å¤ä¹ ï¼šæ ‡è®°å·²å­¦ä¹ ã€ç”Ÿè¯ã€éœ€è¦å¤ä¹ ï¼Œè‡ªåŠ¨ç»Ÿè®¡å½“æ—¥ä¸æ€»ä½“è¿›åº¦ã€‚
- å¡ç‰‡ä½“éªŒï¼šæ­£åé¢å¡ç‰‡ï¼ŒåŠ¨ç”»ä¸å­—å·é€‚é…ï¼Œå¤§å±æ¨ªå±ä½“éªŒä¼˜åŒ–ã€‚
- è¯­éŸ³æœ—è¯»ï¼šå†…ç½®æœ—è¯»æŒ‰é’®ï¼Œæ”¯æŒè¯­é€Ÿä¸å£éŸ³é€‰æ‹©ï¼ˆä¾èµ–ç³»ç»Ÿ TTSï¼‰ã€‚
- GPT é…ç½®ï¼šå¯ä¿å­˜å¹¶æµ‹è¯•è‡ªå®šä¹‰çš„ GPT Base URLã€æ¨¡å‹ä¸ API Keyï¼ˆæŒ‰ç”¨æˆ·éš”ç¦»ï¼‰ã€‚
- ç¦»çº¿æ”¯æŒï¼šService Worker ç¼“å­˜é™æ€èµ„æºï¼Œæ–­ç½‘å¯ç”¨ï¼ˆç½‘ç»œåŠŸèƒ½æœ‰é™ï¼‰ã€‚
- Android æ‰“åŒ…ï¼šåŸºäº Capacitor å°è£…ä¸º APKï¼Œå·²éªŒè¯åœ¨ Android 15 ç¯å¢ƒç¨³å®šè¿è¡Œã€‚

## æŠ€æœ¯æ ˆ
- çº¯å‰ç«¯é™æ€ç«™ç‚¹ï¼š`HTML/CSS/JavaScript`
- ç§»åŠ¨å°è£…ï¼š`Capacitor`ï¼ˆAndroidï¼‰
- æ•°æ®å­˜å‚¨ï¼š`localStorage`ï¼ˆæŒ‰ç”¨æˆ·éš”ç¦»ï¼‰

## ç›®å½•ç»“æ„
- è¿è¡Œç›®å½•ï¼š`GoldWord/GoldWord/www/`ï¼ˆCapacitor ä½¿ç”¨ `www` ä½œä¸º Web èµ„æºç›®å½•ï¼‰
- æºç é•œåƒï¼šé¡¹ç›®æ ¹ç›®å½•ä¹Ÿä¿ç•™åŒåæ–‡ä»¶ï¼Œå‘å¸ƒæ—¶ä»¥ `www/` ä¸ºå‡†ã€‚
- Android å·¥ç¨‹ï¼š`GoldWord/GoldWord/android/`ï¼ˆé€šè¿‡ `npx cap add android` ç”Ÿæˆï¼‰

```
â”œâ”€â”€ GoldWord/GoldWord/www/
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ app.js        // åº”ç”¨ä¸»é€»è¾‘ï¼ˆå­¦ä¹ æµç¨‹ã€å¯¼å…¥ã€SW æ³¨å†Œã€GPT è®¾ç½®ï¼‰
â”‚   â”œâ”€â”€ ui.js         // UI åˆå§‹åŒ–ä¸äº‹ä»¶ç»‘å®šã€å­—å·é€‚é…ã€å¡ç‰‡åŠ¨ç”»
â”‚   â”œâ”€â”€ db.js         // æ•°æ®å­˜å–ä¸ç»Ÿè®¡ã€ç”¨æˆ·ä¸ GPT é…ç½®
â”‚   â”œâ”€â”€ service-worker.js
â”‚   â””â”€â”€ icons/
â”œâ”€â”€ GoldWord/GoldWord/android/   // Android é¡¹ç›®ï¼ˆGradle æ„å»ºï¼‰
â”œâ”€â”€ GoldWord/GoldWord/README-android.md // Android æ‰“åŒ…ä¸ç­¾åè¯¦ç»†æŒ‡å—
â”œâ”€â”€ GoldWord/GoldWord/capacitor.config.json
â””â”€â”€ GoldWord/GoldWord/package.json
```

## å¿«é€Ÿå¼€å§‹ï¼ˆWebï¼‰
- æœ¬åœ°é¢„è§ˆï¼š
  - `cd GoldWord/GoldWord/www && python3 -m http.server 8000` æ‰“å¼€ `http://localhost:8000/`
  - æˆ–ç›´æ¥åœ¨æµè§ˆå™¨æ‰“å¼€ `GoldWord/GoldWord/www/index.html`
- å¯¼å…¥è¯åº“ï¼š
  - `xlsx/xls/csv`ï¼šé€‰æ‹©æ–‡ä»¶åè‡ªåŠ¨è§£æä¸è§„æ•´å­—æ®µï¼ˆå¸ƒå°”å­—æ®µï¼š`studied/needsReview/isNewWord`ï¼‰
  - `docx`ï¼šé€šè¿‡ `mammoth` æå–çº¯æ–‡æœ¬å¹¶è§£æ
  - çº¯æ–‡æœ¬ï¼šæ”¯æŒæŒ‰è¯æ¡åˆ†æ®µçš„æ–‡æœ¬ï¼›å…·ä½“æ ¼å¼è§ä¸‹æ–‡
- å­¦ä¹ æ“ä½œï¼š
  - æŒ‰é’®ï¼šç¿»é¢ã€ä¸‹ä¸€å¼ ã€æœ—è¯»ã€ç”Ÿè¯ã€ä¸è®°å¾—ã€è‡ªåŠ¨æ’­æ”¾ã€ä¸ªäººä¸­å¿ƒï¼ˆç»Ÿè®¡ä¸è®¾ç½®ï¼‰
  - ç»Ÿè®¡ï¼šæ€»è¯æ•°ã€ä»Šæ—¥å­¦ä¹ ã€è¿›åº¦%ã€å¤ä¹ æ•°ã€ç”Ÿè¯æ•°

## æ–‡æœ¬å¯¼å…¥æ ¼å¼
- æ¯ä¸ªè¯æ¡ä»¥â€œè¯å¤´è¡Œâ€å¼€å¤´ï¼ˆä»…å­—æ¯ã€ç©ºæ ¼ã€çŸ­æ¨ªçº¿ï¼‰ï¼Œåç»­è‹¥å¹²è¡Œä½œä¸ºè¯¦æƒ…ï¼š
  - `ä¸­æ–‡/ç¿»è¯‘ï¼š...`
  - `éŸ³æ ‡/å‘éŸ³ï¼š...`ï¼ˆæ–¹æ‹¬å·ä¼šè¢«å»é™¤ï¼‰
  - `è¯æ€§ï¼š...`
  - `å®šä¹‰ï¼š...`
  - `æ­é…ï¼š...`
  - `åŠ©è®°ï¼š...`
  - å¯é€‰æ ‡è®°ï¼š`å·²å­¦/éœ€è¦å¤ä¹ /ç”Ÿè¯`
- æ”¯æŒåˆ†ç±»æ ‡ç­¾ï¼ˆå¦‚ç½—é©¬åºå·æˆ–ä¸»é¢˜è¯ï¼‰ï¼Œè§£æåä¼šå†™å…¥ `category`
- è§£æä¼šè‡ªåŠ¨æ¸…æ´— Emoji ä¸å™ªå£°å­—ç¬¦

## GPT è®¾ç½®
- åœ¨â€œä¸ªäººä¸­å¿ƒâ€å¡«å†™å¹¶ä¿å­˜ï¼š
  - `Base URL`ã€`Model`ã€`API Key`
- ä¸åŒç”¨æˆ·çš„è®¾ç½®å­˜å‚¨åœ¨ `localStorage` çš„ç‹¬ç«‹é”®ï¼š`gpt_config__{userId}`
- æµ‹è¯•æŒ‰é’®ä¼šè¿›è¡Œä¸€æ¬¡æœ€å°åŒ–çš„è¿é€šæ€§æ£€æŸ¥ï¼ˆéœ€è¦ç½‘ç»œå…è®¸ï¼‰
- Android ç«¯å¦‚éœ€è®¿é—® HTTPï¼ˆæ˜æ–‡ï¼‰æ¥å£ï¼Œéœ€åœ¨ `AndroidManifest.xml` å¯ç”¨ `usesCleartextTraffic` å¹¶é…ç½® `network_security_config`

## ç¦»çº¿ä¸ç¼“å­˜
- `service-worker.js` ç¼“å­˜é™æ€èµ„æºï¼ˆHTML/CSS/JS/Iconï¼‰ä»¥æ”¯æŒæ–­ç½‘è¿è¡Œ
- é¦–æ¬¡åŠ è½½éœ€è”ç½‘ï¼Œä¹‹åå¯ç¦»çº¿å­¦ä¹ ï¼›ç½‘ç»œç›¸å…³åŠŸèƒ½ï¼ˆGPT æµ‹è¯•ç­‰ï¼‰åœ¨ç¦»çº¿æ—¶ä¸å¯ç”¨

## Android æ‰“åŒ…
- å®Œæ•´æ­¥éª¤ä¸æ•…éšœæ’æŸ¥è§ `GoldWord/GoldWord/README-android.md`
- ç®€è¦æµç¨‹ï¼š
  - `npm install`
  - `npx cap sync android`
  - Android SDKï¼šå·²åœ¨æœ¬åœ°é…ç½® `sdk.dir`
  - æ„å»ºç­¾å APKï¼š`cd GoldWord/GoldWord/android && ./gradlew assembleRelease`
  - äº§ç‰©ï¼š`GoldWord/GoldWord/android/app/build/outputs/apk/release/app-release.apk`

## å‘å¸ƒåˆ° GitHub
- ä»“åº“ç»“æ„ï¼šæäº¤ `GoldWord/GoldWord/www` ä¸º Web èµ„æºï¼ŒåŒæ—¶å¯æäº¤ `android/`ï¼ˆå¦‚éœ€ï¼‰ã€‚
- ç‰ˆæœ¬ç®¡ç†ï¼šé‡‡ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬ `vX.Y.Z`ï¼ˆå¦‚ï¼š`v1.0.0`ï¼‰ã€‚
- Releasesï¼šä¸Šä¼ æ„å»ºäº§ç‰©ï¼ˆå¦‚ APK/zipï¼‰ï¼›é¿å…æäº¤ä»»ä½•è¯ä¹¦æˆ–ç§é’¥ã€‚

## å¼€å‘ä¸æ„å»º
- å¼€å‘ï¼šç›´æ¥ç¼–è¾‘ `GoldWord/GoldWord/www/` ä¸‹çš„æ–‡ä»¶
- åŒæ­¥åˆ° Androidï¼š`npx cap sync android`
- é¢„è§ˆï¼š
  - `http://localhost:8000/` æˆ–ç›´æ¥æ‰“å¼€ `GoldWord/GoldWord/www/index.html`
- é‡è¦è„šæœ¬ï¼š
  - `npm run cap:add:android`ï¼ˆé¦–æ¬¡æ·»åŠ å®‰å“å¹³å°ï¼‰
  - `npm run cap:sync`ï¼ˆåŒæ­¥ Web èµ„æºåˆ°å®‰å“ï¼‰

## å¸¸è§é—®é¢˜
- æ˜æ–‡ HTTP æ¥å£æ— æ³•è®¿é—®ï¼šæ£€æŸ¥ `AndroidManifest.xml` æ˜¯å¦è®¾ç½® `android:usesCleartextTraffic="true"` ä¸ `network_security_config`
- æ„å»ºå¤±è´¥æç¤º `compileSdk` ä¸æ”¯æŒï¼šå½“å‰ä½¿ç”¨ `AGP 8.0.0`ï¼Œç¨³å®šåœ¨ `compileSdk 34`ï¼›å¾…å‡çº§æ”¯æŒ `35` çš„ AGP åå†åˆ‡æ¢
- APK å®‰è£…å¤±è´¥ï¼šä½¿ç”¨ `adb install -r` å¹¶åœ¨è®¾å¤‡ä¸Šæˆæƒ USB è°ƒè¯•ï¼›`adb devices` æŸ¥çœ‹è¿æ¥çŠ¶æ€

## GitHub Releases è‡ªåŠ¨åŒ–
- å»ºè®®ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬æ ‡ç­¾ï¼Œä¾‹å¦‚ `v1.0.3`ã€‚æ¨é€æ ‡ç­¾å°†è§¦å‘å·¥ä½œæµæ„å»ºå¹¶ä¸Šä¼ äº§ç‰©ã€‚
- ç¤ºä¾‹å·¥ä½œæµï¼ˆåœ¨ `.github/workflows/release-upload.yml`ï¼‰ï¼š
```yaml
name: Release Upload
on:
  push:
    tags:
      - 'v*.*.*'
jobs:
  build-and-upload:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '18'
      - name: Install
        run: npm ci
      - name: Build web archive
        run: |
          cd GoldWord/GoldWord/www
          zip -r goldword-web.zip .
      - name: Upload Release Assets
        uses: softprops/action-gh-release@v2
        with:
          files: |
            GoldWord/GoldWord/www/goldword-web.zip
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```
- å¦‚éœ€ä¸Šä¼  Android/Electron ç­‰å®‰è£…åŒ…ï¼Œå°†æ„å»ºäº§ç‰©è·¯å¾„è¿½åŠ åˆ° `files:` æ¸…å•ä¸­å³å¯ã€‚

## è¯ä¹¦ä¸ Secrets å‡†å¤‡æŒ‡å—
- macOS ç­¾åä¸å…¬è¯ï¼ˆApple ID æ¨¡å¼ï¼‰
  - ç”³è¯· Developer ID Application è¯ä¹¦ï¼ˆ`.p12`ï¼‰ï¼Œå­˜ä¸º Base64 å¹¶é…ç½®ï¼š`MAC_CSC_LINK`ã€`MAC_CSC_KEY_PASSWORD`
  - åˆ›å»º App ä¸“ç”¨å¯†ç ï¼Œé…ç½®ï¼š`APPLE_ID`ã€`APPLE_APP_SPECIFIC_PASSWORD`ã€`APPLE_TEAM_ID`
- macOS å…¬è¯ï¼ˆApple API Key æ¨¡å¼ï¼Œå¯æ›¿ä»£ Apple IDï¼‰
  - åœ¨ App Store Connect åˆ›å»º API Keyï¼ˆç”Ÿæˆ `.p8`ï¼‰
  - å°† `.p8` å†…å®¹ä½œä¸ºæœºå¯†é…ç½®ï¼š`APPLE_API_KEY`ï¼ŒåŒæ—¶è®¾ç½®ï¼š`APPLE_API_KEY_ID`ã€`APPLE_API_ISSUER`
- Windows ä»£ç ç­¾å
  - æ–¹æ¡ˆ Aï¼ˆelectron-builder åŸç”Ÿï¼‰ï¼šè¯ä¹¦ `.pfx` Base64 æ”¾å…¥ `WIN_CSC_LINK`ï¼Œå¯†ç  `WIN_CSC_KEY_PASSWORD`
  - æ–¹æ¡ˆ Bï¼ˆsigntool å›é€€ï¼‰ï¼šè¯ä¹¦ `.pfx` Base64 æ”¾å…¥ `WIN_SIGTOOL_PFX_B64`ï¼Œå¯†ç  `WIN_SIGTOOL_PFX_PASSWORD`
- æ³¨æ„ï¼šæ‰€æœ‰è¯ä¹¦ä¸å¯†ç åªæ”¾åœ¨ GitHub Secretsï¼Œä¸è¦æäº¤åˆ°ä»“åº“ã€‚

- Linux deb ç­¾å
  - å°†ç§é’¥å¯¼å‡ºä¸º ASCII Armorï¼ˆæˆ–äºŒè¿›åˆ¶å Base64ï¼‰ï¼Œé…ç½®ï¼š`LINUX_DEB_GPG_KEY_B64`
  - è®¾ç½®ç­¾å `KEY ID`ï¼š`LINUX_DEB_GPG_KEY_ID` ä¸ç§é’¥å£ä»¤ï¼š`LINUX_DEB_GPG_PASSPHRASE`
  - CI ä¼šå®‰è£… `dpkg-sig` å¹¶å¯¹ç”Ÿæˆçš„ `.deb` æ‰§è¡Œéäº¤äº’ç­¾å

## English Summary
- What it is: a static PWA vocabulary app with optional GPT enrichment; Electron and Capacitor shells available.
- Key features: import from Excel/CSV/Docx/Text, spaced repetition, speak modes, offline caching, multi-language UI.
- Structure: `index.html`, `app.js`, `ui.js`, `db.js`, `word-enhancement-service.js`, `service-worker.js`.
- Usage:
  - Local preview: `cd GoldWord/GoldWord/www && python3 -m http.server 8000`
  - Configure GPT under Personal Centre, test connectivity, start learning.
- Deployment: Netlify/Cloudflare Pages/Firebase Hosting; publish `GoldWord/GoldWord/www`.
- Security: keep keys locally; do not commit secrets; use HTTPS endpoints.

## Common Issues & Troubleshooting
- macOS notarization timeout/failure
  - Prefer API Key + notarytool; verify `APPLE_API_KEY_ID` and `APPLE_API_ISSUER`
  - Ensure Base64 `.p8` has no extra whitespace; retry on Apple rate limiting
- Certificate password errors (macOS/Windows)
  - Renew credentials and update Secrets; avoid invisible characters
  - Prefer Base64 `.p12/.pfx` in Secrets to avoid filesystem path issues
- Timestamp server unavailable (Windows)
  - Switch to RFC3161 server: `http://timestamp.digicert.com`
  - Use `signtool` fallback step to re-sign
- GPG signing fails (Linux deb)
  - Ensure `pinentry-mode loopback`, correct `KEY ID` and passphrase
  - Verify private key matches maintainer identity
